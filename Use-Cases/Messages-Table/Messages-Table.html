<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Use Case Messages</title>
<style>
:root{--b:#bdbdbd;--t:#333;--m:#666;--bg:#f9f9f9;--w:#fff;--h:#f0f0f0;}
body{font:15px Arial,sans-serif;margin:20px auto;padding:20px;max-width:1200px;background:var(--bg);color:var(--t);border:2px solid #ccc;}
h1{text-align:center;margin:0 0 12px}
p{text-align:center;color:var(--m);margin:0 0 20px}
.export-buttons{display:flex;justify-content:center;flex-wrap:wrap;gap:10px;margin-bottom:18px}
.export-buttons button{padding:8px 14px;border:none;border-radius:4px;background:#000;color:#fff;cursor:pointer;font-weight:700}
.export-buttons button:hover{opacity:.85}
table{width:100%;border-collapse:collapse;background:var(--w);box-shadow:0 2px 6px rgba(0,0,0,.1);font-size:13px;margin-bottom:20px}
th,td{border:1px solid var(--b);padding:8px;vertical-align:top;line-height:1.3}
th{background:var(--h);font-weight:700;text-align:left}
tr:nth-child(even) td{background:#fafafa}
.badge{display:inline-block;padding:2px 8px;border-radius:3px;font-size:12px;font-weight:600;color:#fff}
.badge.info{background:#1976d2}.badge.success{background:#388e3c}.badge.warning{background:#f57c00}.badge.error{background:#d32f2f}
@media print{
 body{margin:0;padding:0;border:none;max-width:none;background:#fff}
 .export-buttons{display:none}
 thead{display:table-header-group}
 tr{page-break-inside:avoid}
 h1,p{page-break-after:avoid}
 @page{size:A4 landscape;margin:1.5cm 1cm}
}
</style>
</head>
<body>

<h1 id="pageTitle">Messages</h1>
<p id="pageDescription">Centralized catalog of user/system messages with unique IDs for cross-referencing in use cases</p>

<div class="export-buttons">
  <button onclick="exportToCSV()">Export CSV</button>
  <button onclick="exportToPDF()">Export PDF</button>
  <button onclick="window.print()">Print</button>
</div>

<table id="messagesTable">
  <thead id="messagesHead"></thead>
  <tbody id="messagesBody"></tbody>
</table>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
<script>
const pageConfig={title:"Messages",description:"Centralized catalog of user/system messages with unique IDs for cross-referencing in use cases",fileName:"Messages"};
const messagesColumns=[{header:"Message ID",key:"id"},{header:"Name",key:"name"},{header:"Audience",key:"audience"},{header:"Category",key:"category"},{header:"Trigger/Context",key:"context"},{header:"Text",key:"text"},{header:"Related Use Case IDs",key:"useCases"},{header:"Notes",key:"notes"}];
const messages = [
  {id:"MSG-101",name:"End Date Validation",audience:"User",category:"Error",context:"Date validation",text:"End date must be strictly after start date.",useCases:"UC-1",notes:"Basic date validation rule"},
  {id:"MSG-102",name:"Leave Balance Exceeded",audience:"User",category:"Error",context:"Balance validation",text:"Requested days exceed available leave balance.",useCases:"UC-1",notes:"Prevents over-booking"},
  {id:"MSG-103",name:"Medical Certificate Required",audience:"User",category:"Error",context:"Document validation",text:"Medical certificate attachment is required for Sick leave.",useCases:"UC-1",notes:"Mandatory for sick leave type"},
  
  {id:"MSG-201",name:"Cancellation Date Validation",audience:"User",category:"Error",context:"Cancellation timing",text:"Cancellation must occur before vacation start date.",useCases:"UC-2",notes:"Prevents late cancellations"},
  {id:"MSG-202",name:"Invalid Status for Cancellation",audience:"User",category:"Error",context:"Status validation",text:"Only requests in Pending or Approved status can be cancelled.",useCases:"UC-2",notes:"Status-based restriction"},
  {id:"MSG-203",name:"Data Inconsistency",audience:"System",category:"Error",context:"Data validation",text:"Cancellation request data must match original request.",useCases:"UC-2",notes:"Data integrity check"},
  {id:"MSG-204",name:"Cancellation After Start Date",audience:"User",category:"Error",context:"Cancellation timing",text:"Cancellation attempted after start date.",useCases:"UC-2",notes:"Prevents cancellation of active vacations"},
  {id:"MSG-205",name:"Invalid Status for Cancellation Action",audience:"User",category:"Error",context:"Status validation",text:"Request not in Pending or Approved status.",useCases:"UC-2",notes:"Status-based restriction"},

  {id:"MSG-301",name:"Invalid Approval Action",audience:"User",category:"Error",context:"Approval workflow",text:"Only pending requests can be approved or rejected.",useCases:"UC-3",notes:"Prevents action on finalized requests"},
  {id:"MSG-302",name:"Missing Approver Comment",audience:"User",category:"Error",context:"Approval justification",text:"Rejection requires a mandatory comment.",useCases:"UC-3",notes:"Ensures rejection reason is documented"},
  {id:"MSG-303",name:"Duplicate Approval Action",audience:"System",category:"Error",context:"Workflow validation",text:"This request has already been processed.",useCases:"UC-3",notes:"Prevents double approvals/rejections"},
  {id:"MSG-304",name:"Request Details Not Found",audience:"User",category:"Error",context:"Data retrieval",text:"Request details not found.",useCases:"UC-3",notes:"Data availability error"},

  {id:"MSG-401",name:"HR Access Only",audience:"User",category:"Error",context:"Permission validation",text:"Only HR staff can modify approved vacation records.",useCases:"UC-4",notes:"Restricts unauthorized modifications"},
  {id:"MSG-402",name:"Mandatory Justification",audience:"User",category:"Error",context:"Modification validation",text:"Modification requires a justification comment.",useCases:"UC-4",notes:"Ensures changes are logged with reasons"},
  {id:"MSG-403",name:"Invalid Record State",audience:"System",category:"Error",context:"Data state validation",text:"Only approved requests can be modified by HR.",useCases:"UC-4",notes:"Prevents changes to pending or cancelled requests"},

  {id:"MSG-501",name:"Vacation Already Started",audience:"User",category:"Error",context:"Cancellation review",text:"Reviewer attempts to review cancellation for a vacation already started.",useCases:"UC-5",notes:"Prevents review of active vacations"},
  {id:"MSG-502",name:"Invalid Request Status for Cancellation Review",audience:"User",category:"Error",context:"Status validation",text:"Original request status is not Pending or Approved.",useCases:"UC-5",notes:"Status-based restriction for cancellation review"},
  {id:"MSG-503",name:"Accrual Limit Reached",audience:"System",category:"Error",context:"Vacation accrual",text:"Employee has reached the maximum allowable vacation balance.",useCases:"UC-5",notes:"Enforces balance caps"},
  {id:"MSG-504",name:"Negative Balance Prevention",audience:"System",category:"Error",context:"Balance update",text:"Vacation balance cannot become negative.",useCases:"UC-5",notes:"Prevents invalid deductions"},
  {id:"MSG-505",name:"Carryover Validation",audience:"System",category:"Error",context:"Year-end processing",text:"Carryover days exceed policy limit.",useCases:"UC-5",notes:"Validates carryover rules"},

  {id:"MSG-601",name:"No Pending Requests",audience:"User",category:"Info",context:"Empty state",text:"No Pending Requests",useCases:"UC-6",notes:"Empty state message when no pending requests exist"},

  {id:"MSG-701",name:"Search Parameters Required",audience:"User",category:"Error",context:"Search validation",text:"Search parameters are required.",useCases:"UC-7",notes:"Ensures search criteria are provided"},
  {id:"MSG-702",name:"Invalid Date Range",audience:"User",category:"Error",context:"Date validation",text:"From Date is after To Date.",useCases:"UC-7",notes:"Date range validation error"},
  {id:"MSG-703",name:"Department Not Found",audience:"User",category:"Error",context:"Data validation",text:"Department not found in master data.",useCases:"UC-7",notes:"Department data validation error"},

  {id:"MSG-801",name:"Print Not Available",audience:"User",category:"Error",context:"Print validation",text:"Print option is available only for Approved requests.",useCases:"UC-8,UC-9",notes:"Print access restriction for non-approved requests"},

  {id:"MSG-901",name:"Report Generation Failed",audience:"User",category:"Error",context:"Report generation",text:"Failed to generate report. Please try again.",useCases:"UC-9",notes:"Report generation error"},

  {id:"MSG-1001",name:"Comparative Report Failed",audience:"User",category:"Error",context:"Report generation",text:"Failed to generate comparative report. Please try again.",useCases:"UC-10",notes:"Comparative report generation error"},
  {id:"MSG-1002",name:"Department Selection Required",audience:"User",category:"Error",context:"Report validation",text:"At least one Department must be selected.",useCases:"UC-10",notes:"Department selection validation"},
  {id:"MSG-902",name:"Report Generation Failed - Data Missing",audience:"User",category:"Error",context:"Report generation",text:"Unable to generate report – required data missing.",useCases:"UC-10",notes:"Data validation error for report generation"},

  {id:"MSG-1101",name:"No Notifications",audience:"User",category:"Info",context:"Empty state",text:"No new notifications.",useCases:"UC-11",notes:"Empty state message when no notifications exist"},
  {id:"MSG-1102",name:"Request Not Available",audience:"User",category:"Error",context:"Data access",text:"Request not available.",useCases:"UC-11",notes:"Request accessibility error"},

  {id:"MSG-1201",name:"Balance Update Failed",audience:"System",category:"Error",context:"Balance calculation",text:"Unable to update balance – employee data incomplete.",useCases:"UC-12",notes:"Employee data validation error"},
  {id:"MSG-1202",name:"Employee Not Eligible",audience:"System",category:"Error",context:"Eligibility validation",text:"Vacation request not permitted for this employee type.",useCases:"UC-12",notes:"Employee eligibility restriction"}
];


function initializePage(){
 document.getElementById("pageTitle").textContent=pageConfig.title;
 document.getElementById("pageDescription").textContent=pageConfig.description;
 document.getElementById("messagesHead").innerHTML="<tr>"+messagesColumns.map(c=>`<th>${c.header}</th>`).join("")+"</tr>";
 document.getElementById("messagesBody").innerHTML=messages.map(r=>"<tr>"+messagesColumns.map(c=>{
   let v=r[c.key]||"";if(c.key==="category"){return `<td><span class="badge ${v.toLowerCase()}">${v}</span></td>`}
   return `<td>${v}</td>`}).join("")+"</tr>").join("");
}

function exportToCSV(){
 const lines=[messagesColumns.map(c=>c.header).join(",")];
 messages.forEach(m=>lines.push(messagesColumns.map(c=>`"${(m[c.key]||"").replace(/"/g,'""')}"`).join(",")));
 const blob=new Blob([lines.join("\n")],{type:"text/csv;charset=utf-8;"});
 const link=document.createElement("a");link.href=URL.createObjectURL(blob);link.download=`${pageConfig.fileName}.csv`;link.click();
}

function exportToPDF(){
 const { jsPDF }=window.jspdf;const doc=new jsPDF({orientation:"landscape",unit:"pt",format:"a4"});
 doc.setProperties({title:pageConfig.title,subject:pageConfig.description});
 doc.autoTable({head:[messagesColumns.map(c=>c.header)],body:messages.map(r=>messagesColumns.map(c=>r[c.key]||"")),styles:{fontSize:8,cellPadding:3,valign:"top"},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"}});
 doc.save(`${pageConfig.fileName}.pdf`);
}

document.addEventListener("DOMContentLoaded",initializePage);
</script>
</body>
</html>
